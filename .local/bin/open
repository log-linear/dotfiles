#!/usr/bin/sh

# General purpose CLI file-opener with window swallowing

file="$1"

if [ "$file" != "" ]; then
  xdg_type=$(xdg-mime query filetype "$file")
  fcat=$(echo "$xdg_type" | sed 's/\/.*//g')

  if [ "$fcat" = "text" ]; then
    $EDITOR "$file"
  elif [ "$fcat" = "application" ]; then
    ftype=$(echo "$xdg_type" | sed 's/.*\///g')
    case "$ftype" in
      json|\
      xml|\
      x-shellscript|\
      javascript|\
      sql|\
      x-perl)
        $EDITOR "$file" ;;
      *)
        swallow xdg-open "$file"
    esac
  else
    swallow xdg-open "$file"
  fi
fi

